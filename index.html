<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>whowhe2wha: Unified Context Engine</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#111827" />
    <link rel="apple-touch-icon" href="/icon-192.png">

    <script type="importmap">
        {
          "imports": {
            "react": "https://aistudiocdn.com/react@^19.2.0",
            "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
            "react/": "https://aistudiocdn.com/react@^19.2.0/",
            "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0"
          }
        }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
        @layer base {
          :root {
            /* Base */
            --color-primary: 243 244 246; /* gray-100 */
            --color-secondary: 156 163 175; /* gray-400 */
            --color-tertiary: 55 65 81; /* gray-700 */

            /* Backgrounds */
            --background-primary: 17 24 39; /* gray-900 */
            --background-secondary: 31 41 55; /* gray-800 */
            --background-input: 55 65 81; /* gray-700 */
            --background-modal-overlay: 17 24 39 / 0.8;

            /* Entities */
            --color-who-pink: 236 72 153; /* pink-500 */
            --color-where-green: 16 185 129; /* green-500 */
            --color-wha-blue: 59 130 246; /* blue-500 */
            --color-to-orange: 245 158 11; /* orange-400 */
            
            /* Status */
            --color-status-active: 34 197 94; /* green-500 */
            --color-status-active-text: 240 253 244; /* green-50 */
            --color-status-completed: 96 165 250; /* blue-400 */
            --color-status-completed-text: 239 246 255; /* blue-50 */
            --color-status-onhold: 252 165 165; /* red-300 */
            --color-status-onhold-text: 127 29 29; /* red-900 */
             
            /* Time of Day */
            --color-morning: 245 158 11; /* amber-500 */
            --color-midday: 59 130 246; /* blue-500 */
            --color-afternoon: 236 72 153; /* pink-500 */
          }

          html.light {
            --color-primary: 17 24 39; /* gray-900 */
            --color-secondary: 75 85 99; /* gray-600 */
            --color-tertiary: 209 213 219; /* gray-300 */
            --background-primary: 255 255 255; /* white */
            --background-secondary: 249 250 251; /* gray-50 */
            --background-input: 255 255 255; /* white */
            --background-modal-overlay: 255 255 255 / 0.8;
            --color-status-onhold: 239 68 68; /* red-500 */
            --color-status-onhold-text: 254 226 226; /* red-100 */
          }

          html.focus {
             --color-primary: 92 64 51; /* custom sepia text */
             --color-secondary: 148 112 93; /* custom sepia secondary text */
             --color-tertiary: 228 212 197; /* custom sepia border */
             --background-primary: 251 243 235; /* custom sepia bg */
             --background-secondary: 245 235 224; /* custom sepia secondary bg */
             --background-input: 251 243 235; /* custom sepia bg */
             --background-modal-overlay: 251 243 235 / 0.8;
             --color-status-onhold: 239 68 68;
             --color-status-onhold-text: 254 226 226;
          }

          input[type="date"]::-webkit-calendar-picker-indicator,
          input[type="datetime-local"]::-webkit-calendar-picker-indicator {
            cursor: pointer;
            filter: invert(0.8);
          }
        }
    </style>
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                  primary: 'rgb(var(--color-primary) / <alpha-value>)',
                  secondary: 'rgb(var(--color-secondary) / <alpha-value>)',
                  tertiary: 'rgb(var(--color-tertiary) / <alpha-value>)',
                  'who-pink': 'rgb(var(--color-who-pink) / <alpha-value>)',
                  'where-green': 'rgb(var(--color-where-green) / <alpha-value>)',
                  'wha-blue': 'rgb(var(--color-wha-blue) / <alpha-value>)',
                  'to-orange': 'rgb(var(--color-to-orange) / <alpha-value>)',
                  'morning': 'rgb(var(--color-morning) / <alpha-value>)',
                  'midday': 'rgb(var(--color-midday) / <alpha-value>)',
                  'afternoon': 'rgb(var(--color-afternoon) / <alpha-value>)',
                   status: {
                      'active': 'rgb(var(--color-status-active) / <alpha-value>)',
                      'active-text': 'rgb(var(--color-status-active-text) / <alpha-value>)',
                      'completed': 'rgb(var(--color-status-completed) / <alpha-value>)',
                      'completed-text': 'rgb(var(--color-status-completed-text) / <alpha-value>)',
                      'onhold': 'rgb(var(--color-status-onhold) / <alpha-value>)',
                      'onhold-text': 'rgb(var(--color-status-onhold-text) / <alpha-value>)',
                  }
              },
              backgroundColor: {
                primary: 'rgb(var(--background-primary) / <alpha-value>)',
                secondary: 'rgb(var(--background-secondary) / <alpha-value>)',
                input: 'rgb(var(--background-input) / <alpha-value>)',
                'modal-overlay': 'rgb(var(--background-modal-overlay))',
              },
              borderColor: {
                  primary: 'rgb(var(--color-tertiary) / 0.5)',
                  secondary: 'rgb(var(--color-secondary) / 0.5)',
              },
              fontFamily: {
                  sans: ['Inter', 'sans-serif'],
              },
            }
          }
        }
      </script>
      <link rel="preconnect" href="https://rsms.me/">
      <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
</head>
<body class="bg-primary">
    <div id="root"></div>
    <script type="module" src="./index.tsx"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then(registration => {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(error => {
              console.log('ServiceWorker registration failed: ', error);
            });
        });
      }
    </script>
</body>
</html>